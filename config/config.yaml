# config.yaml
# === Subject info ===
subinfo_fields:
  - name: subject_id
    type: int
    constraints:
      min: 101
      max: 999
      digits: 3

  - name: session_name
    type: string

  - name: experimenter
    type: string

  - name: gender
    type: choice
    choices: [Male, Female]

subinfo_mapping:
    subject_id: "被试号"
    session_name: "Session名称(Practice/Experiment)"
    experimenter: "主试姓名或缩写"
    gender: "性别"
    Male: "男"
    Female: "女"
    registration_failed: "注册失败。"
    registration_successful: "注册成功！"
    invalid_input: "字段 {field} 输入无效。"


# === Window settings ===
window:
  size: [1920, 1080]
  monitor: testMonitor
  units: deg
  screen: 1
  bg_color: gray
  fullscreen: True

# === Task-level settings ===
task:
  total_blocks: 3
  total_trials: 225
  trial_per_block: 75
  conditions: [win, lose, neut]
  key_list: [down]
  delta: 10
  seed_mode: "same_across_sub"


# === Stimuli (for MID task) ===
stimuli:
  fixation:
    type: text
    text: "+"
    color: black

  win_cue:
     type: circle
     radius: 3
     fillColor: magenta
     lineColor: black
 
  lose_cue:
    type: rect
    width: 6
    height: 6
    fillColor: yellow
    lineColor: black

  neut_cue:
    type: polygon
    edges: 3
    size: 6
    fillColor: cyan
    lineColor: black

  win_target:
    type: circle
    radius: 3
    fillColor: black
    lineColor: black

  lose_target:
    type: rect
    width: 6
    height: 6
    fillColor: black
    lineColor: black

  neut_target:
    type: polygon
    edges: 3
    size: 6
    fillColor: black
    lineColor: black

  win_hit_feedback:
    type: textbox
    text: |
      击中
      +10 分
    color: white
    font: SimHei
    alignment: center
    letterHeight: 0.78
 
  win_miss_feedback:
    type: textbox
    text: |
      未击中
      +0 分
    color: white
    font: SimHei
    alignment: center
    letterHeight: 0.78

  lose_hit_feedback:
    type: textbox
    text: |
      击中
      -0 分
    color: white
    font: SimHei
    alignment: center
    letterHeight: 0.78

  lose_miss_feedback:
    type: textbox
    text: |
      未击中
      -10 分
    color: white
    font: SimHei
    alignment: center
    letterHeight: 0.78

  neut_hit_feedback:
    type: textbox
    text: |
      击中
      +0 分
    color: white
    font: SimHei
    alignment: center
    letterHeight: 0.78   

  neut_miss_feedback:
    type: textbox
    text: |
      未击中
      -0 分
    color: white
    font: SimHei
    alignment: center
    letterHeight: 0.78
  
  iti_stim:
    type: text
    text: ""

  block_break:
    type: textbox
    text: |
      第 {block_num} / {total_blocks} 部分完成
      击中率：{accuracy:.2f}
      总分：{total_score}
      
      请在充分休息后按下空格键
      进入下一个部分
    color: white
    font: SimHei
    alignment: center
    letterHeight: 0.78


  instruction_text:
    type: textbox
    text: |
      【MID 任务】

      接下来，您将参与一个反应任务。
      每个试次开始时，会出现不同形状的提示图案，
      它们分别代表不同的得分条件：
      
      ● 圆形：有机会赢取奖励
      ■ 方形：有可能失去分数
      ▲ 三角形：无得失

      随后，您需要在目标出现时尽快按下指定按键。
      击中目标可能获得奖励或避免失分，
      未击中则可能失去奖励或扣分。

      请尽量快速而准确地作出反应！
 
    color: black
    font: SimHei
    alignment: center
    letterHeight: 0.78
 
  instruction_image1:
    type: image
    image: ./assets/instruction_iamge1.bmp

 
  instruction_image2:
    type: image
    image: ./assets/instruction_image2.bmp


  good_bye:
    type: textbox
    text: |
      任务结束
  
      最后得分:{total_score}
      感谢您的参与
      请按【空格键】键退出
    color: white
    font: SimHei
    alignment: center
    letterHeight: 0.78

# === Timing & Adaptivity ===
timing:
  
  cue_duration: 0.3
  anticipation_duration: [1, 1.2]
  fixation_duration: [0.8,1]
  feedback_duration: 1
  iti_duration: [0.6, 0.8]

controller:
  initial_duration: 0.3
  min_duration: 0.15
  max_duration: 0.5
  step: 0.05
  target_accuracy: 0.66
  condition_specific: true

triggers:
  win_cue_onset: 10
  lose_cue_onset: 20
  neut_cue_onset: 30

  win_anti_onset: 11
  lose_anti_onset: 21
  neut_anti_onset: 31

  win_target_onset: 12
  lose_target_onset: 22
  neut_target_onset: 32

  win_hit_fb_onset: 13
  lose_hit_fb_onset: 23
  neut_hit_fb_onset: 33
  
  win_miss_fb_onset: 14
  lose_miss_fb_onset: 24
  neut_miss_fb_onset: 34

  win_key_press: 15
  lose_key_press: 25
  neut_key_press: 35

  win_no_response: 16
  lose_no_response: 26
  neut_no_response: 36

  exp_onset: 98
  exp_end: 99

  block_onset: 100
  block_end: 101

  fixation_onset: 1


